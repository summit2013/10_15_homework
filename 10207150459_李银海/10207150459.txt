信管15班  李银海  10207150459
#include "stdio.h" 

#include <malloc.h>

#define max 100 

#define pfree 0 /*process end*/ 

#define running 1 /*process running status*/ 

#define aready 2 /*process aready status */ 

#define blocking 3 /*process aready blocking status*/ 

typedef struct node 

{ //先来先服务

char name; 

int status; 

int ax,bx,cx,dx; 

int pc; 

int psw; 

struct node *next; /*pcb define*/ 

}pcb; 

pcb *createprocess(pcb *head) 

{ 

pcb *p,*q; 

int a,b,c,d,m,n; 

char ID; 

q=NULL; 

printf("input the first seven status pcb:"); 

scanf("\n%c%d%d%d%d%d%d",&ID,&a,&b,&c,&d,&m,&n); 

while(1) 

{ 

p=(pcb*)malloc(sizeof(pcb)); 

p->name=ID; 

p->ax=a; 

p->bx=b; 

p->cx=c; 

p->dx=d; 

p->pc=m; 

p->psw=n; 

p->status=aready; 

if(head==NULL) 

head=p; 

else 

q->next=p; 

q=p; 

printf("input the next seven status pcb: "); 

scanf("\n%c",&ID);

if (ID == '*')

break;

scanf("%d%d%d%d%d%d",&a,&b,&c,&d,&m,&n);

} 

if(q!=NULL) 

q->next=NULL; 

q=head; 

while(q) 

{ 

printf("\n process name. status.ax. bx. cx. dx. pc. psw.\n "); 

printf("%10c%5d%5d%5d%5d%5d%5d%5d",q->name,q->status,q->ax,q->bx,q->cx,q->dx,q->pc,q->psw); 

q=q->next; 

} 

return head;/*createprocess end*/ 

} 

void processfcfs(pcb *head) /*use fifo */ 

{ 

pcb *p; 

p=head; 

printf("\n the process use fcfs method.\n"); 

printf("running the frist process:\n"); 

while(p!=NULL) 

{ 

p->status=running; 

printf("\nprocess name status. ax. bx. cx. dx. pc. psw."); 

printf("\n%10c%5d%8d%5d%5d%5d%5d%5d",p->name,p->status,p->ax,p->bx,p->cx,p->dx,p->pc,p->psw); /*check process running status */ 

p->status=0; 

p=p->next; 

} 

printf("\n检查进程是否结束:"); 

p=head; 

while(p) 

{ 

printf("\n%3c%3d",p->name,p->status); 

p=p->next; 

} 

printf("\ngame is over!\n"); 

} 

main() 

{ 

pcb *head; 

head=NULL; 

head=createprocess(head); 

processfcfs(head); 

}

